<%# OVERRIDE Blacklight 7.0.0 to render the constaints in the search results in a different place and add full text search metadata %>

<div id="sortPerPage" class="d-block d-sm-flex justify-content-between align-items-start">
  <%= render 'constraints' %>
  <%= render_results_collection_tools wrapping_class: "search-widgets float-md-right align-items-center" %>
</div>

<div class="sort-pagination d-block d-sm-flex justify-content-between align-items-start pt-3">
  <%= render partial: "paginate_compact", object: @response if show_pagination? %>
</div>

<% if params[:q].present? %>
  <div class="search-term-hint d-block">
    <%= t('search.hint', search_location: params['fulltext'].present? ? t('search.full_text.search_location') : t('search.metadata_only.search_location')) %>
    <b><%= params[:q] %></b>
  </div>
<% end %>

<div class="search-banner alert alert-info" role="alert">
  <% alt_query_params = request.params.except('page', 'controller', 'action') %>
  <% if params['fulltext'] %>
    <% if @ft_document_list.present? %>
      <%= t('search.full_text.results.info') %>
      <%= link_to t('search.full_text.results.link'), "#{request.path}?#{alt_query_params.except('fulltext').to_query}" %>
    <% else %>
      <%= t('search.full_text.no_results.info') %>
      <%= link_to t('search.full_text.no_results.link'), "#{request.path}?#{alt_query_params.except('fulltext').to_query}" %>
    <% end %>
  <% else %>
    <%= t('search.metadata_only.info') %>
    <%= link_to t('search.metadata_only.link'), "#{request.path}?#{alt_query_params.merge(fulltext: 'true').to_query}" %>
  <% end %>
</div>
